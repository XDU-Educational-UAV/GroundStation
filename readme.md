# 地面站
c#上位机

版本 v0.03

## 使用说明
有基本收发、飞行控制、参数设置3个标签。

可自动识别可用端口号。

### 基本收发
3个发送窗口独立。第一个支持定时发送。前两个为多行，第三个为单行。

### 飞行控制
点击"建立控制链路"按钮开始以100ms间隔发送遥控帧,如果收到正确的帧则飞行状态显示"控制中"。

点击一次"解锁"按钮发送一帧解锁数据帧,收到正确的状态帧后,按钮变为"锁定",飞行状态显示"解锁"。

### 参数设置

## 协议
协议说明:

SUM等于从该数据帧第一字节开始，也就是帧头开始，至该帧数据的最后一字节所有字节的和的最低位字节。

协议中长度字节表示该数据帧内包含数据的字节总长度，不包括帧头、功能字、长度字节和最后的校验位，只是数据的字节长度和

3E、3C分别为">"、"<"的ASCII值。

### 飞控->地面站

|帧名称|宏定义  |帧头|功能字|长度|数据 |校验|备注|
|-     |-       |-   |-     |-   |-    |-   |- |
|状态  |P_STAT  |3E  |01    |02  |u8×2 |SUM |飞机状态(BIT7侧翻,BIT0解锁)/电压(2分后乘100取整)|
|姿态  |P_ATTI  |3E  |02    |06  |s16×3|SUM |飞机姿态,roll/pitch/yaw数据各乘100|
|传感器|P_SENSOR|3E  |04    |0C  |s16×6|SUM |分别为陀螺仪和加速度计原始数据|
|遥控  |P_CTRL  |3E  |08    |08  |s16×4|SUM |遥控器4个通道的控制信号|
|油门  |P_MOTOR |3E  |30    |08  |s16×4|SUM |分别为4个电机的油门大小|

示例: 3E 01 02 81 C0 82 表示飞控发送状态数据,已侧翻,已解锁,电压3.84V

### 地面站->飞控

|帧名称|宏定义  |帧头|功能字|长度|数据 |校验|备注|
|-     |-       |-   |-     |-   |-    |-   |-|
|解锁  |P_STAT  |3C  |01    |02  |u8×2 |SUM |解锁(BIT2陀螺仪校准,BIT1加速度计校准,BIT0解锁),控制密码|
|遥控  |P_CTRL  |3C  |08    |08  |s16×4|SUM |roll/pitch/throttle/yaw控制数据|

示例: 3C 01 02 01 48 88 表示请求解锁,飞机解锁密码0x48

## 飞行控制
用键盘进行飞行控制的方法:

WSAD和IKJL

## BUG
* 可用端口号发生改变时会自动断开。

* 数据刷新速度过慢。
